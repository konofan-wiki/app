(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[490],{692137:function(n,e,t){"use strict";function r(n,e,t,r,i,c,a){try{var o=n[c](a),s=o.value}catch(l){return void t(l)}o.done?e(s):Promise.resolve(s).then(r,i)}function i(n){return function(){var e=this,t=arguments;return new Promise((function(i,c){var a=n.apply(e,t);function o(n){r(a,i,c,o,s,"next",n)}function s(n){r(a,i,c,o,s,"throw",n)}o(void 0)}))}}t.d(e,{Z:function(){return i}})},720191:function(n,e,t){"use strict";t.r(e),t.d(e,{__N_SSG:function(){return g}});var r=t(785893),i=t(887757),c=t.n(i),a=t(692137),o=t(541749),s=t(522318),l=t(672679),u=t(388767),d=t(649525),f=t(729168),p=t(885515),x=t(126464),m=t(967964),h=[{name:"Arena Info",minWidth:"300",center:!0,cell:function(n){var e=n.arena;return console.log(e),(0,r.jsxs)(o.Z,{container:!0,direction:"column",justify:"center",alignContent:"center",alignItems:"center",children:[(0,r.jsx)(o.Z,{item:!0,children:(0,r.jsx)(l.LazyLoadImage,{src:t(705977)("./".concat(e.boss_shape,".png"))})}),(0,r.jsx)(o.Z,{item:!0,children:(0,r.jsx)(d.Z,{label:!1,weakness:[e.attr1,e.attr2]})})]})},grow:0},{name:"Ranking History",grow:3,center:!0,cell:function(n){return(0,r.jsx)(p.Z,{title:"Top 1000 Ranking",data:n.formations,defaultSortAsc:!0,defaultSortField:"id",pagination:!1,subHeader:!1,noHeader:!0,columns:[{selector:"rank",name:"Rank",maxWidth:"100px",minWidth:"60px",center:!0,sortable:!0},{name:"Score",selector:"score",width:"130px",hide:"md"},{name:"date",selector:"createdAt",width:"100px",center:!0},{name:"Formation",center:!0,width:"400px",cell:function(n){var e;return n?(0,r.jsx)(o.Z,{container:!0,direction:"row",wrap:"nowrap",children:null===(e=n.party)||void 0===e?void 0:e.map((function(n){return(0,r.jsx)(o.Z,{container:!0,direction:"column",item:!0,children:n.main>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Z,{item:!0,style:{position:"relative"},children:(0,r.jsx)(f.Z,{member_id:n.main,width:"80",lv:n.main_lv,ex:1===n.main_ex_flg})}),(0,r.jsxs)(o.Z,{container:!0,direction:"column",children:[(0,r.jsxs)(o.Z,{container:!0,direction:"row",children:[(0,r.jsx)(o.Z,{item:!0,children:0!==n.sub1&&(0,r.jsx)("div",{children:(0,r.jsx)(l.LazyLoadImage,{src:t(82779)("./".concat(n.sub1,".png")),width:"40",effect:"opacity"})})}),(0,r.jsx)(o.Z,{item:!0,children:0!==n.sub2&&(0,r.jsx)(l.LazyLoadImage,{src:t(82779)("./".concat(n.sub2,".png")),width:"40",effect:"opacity"})})]}),(0,r.jsxs)(o.Z,{container:!0,direction:"row",children:[(0,r.jsx)(o.Z,{item:!0,children:0!==n.weapon&&(0,r.jsx)(l.LazyLoadImage,{src:t(381903)("./".concat(n.weapon.toString().slice(0,-1),".png")),width:"40",effect:"opacity"})}),(0,r.jsx)(o.Z,{item:!0,children:0!==n.acc&&(0,r.jsx)(l.LazyLoadImage,{src:t(429513)("./".concat(n.acc.toString().slice(0,-1),".png")),width:"40",effect:"opacity"})})]}),(0,r.jsx)(o.Z,{container:!0,direction:"row",justify:"center",children:(0,r.jsx)(o.Z,{item:!0,style:{position:"relative",height:"40px"},children:0!==n.specialskill&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.LazyLoadImage,{src:t(767207)("./".concat(n.specialskill.toString().slice(0,-1)+"1",".png")),height:"40",style:{position:"relative",left:"20px",zIndex:0},effect:"opacity"}),(0,r.jsx)(l.LazyLoadImage,{src:t(245112)("./".concat("1"===n.specialskill.toString().slice(-1)?"icon_skill_01":"icon_skill_02",".png")),height:"40",style:{position:"relative",zIndex:1,left:"-20px"},effect:"opacity"})]})})})]})]})},n.form_no)}))}):(0,r.jsx)("div",{})}}]})}}],g=!0;e.default=function(n){var e=n.lang,i=n.arenas;if("jp"===e){var d=(0,x.Z)().query.id,f=m.W.useContainer(),g=f.mongodb,j=f.isAuthenticated,v=(0,u.useQuery)([d,j],(0,a.Z)(c().mark((function n(){var e;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!d||!j){n.next=5;break}return n.next=3,g.db("konofan").collection("user").findOne({_id:d});case 3:return e=n.sent,n.abrupt("return",e);case 5:return n.abrupt("return",null);case 6:case"end":return n.stop()}}),n)})))).data,w=(0,u.useQuery)([!!v,j],(0,a.Z)(c().mark((function n(){var e,t,r;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!v||!j){n.next=9;break}return e=Object.values(v.ranking).flat(),n.next=4,g.db("konofan").collection("unique").find({_id:{$in:e}});case 4:return t=n.sent,console.log(t),r=[],Object.keys(v.ranking).forEach((function(n){var e=v.ranking[n];r.push({arena_id:n,arena:i.find((function(e){return e.id===n})),formations:e.map((function(n){return t.find((function(e){return e._id.toHexString()===n.toHexString()}))}))})})),n.abrupt("return",r);case 9:return n.abrupt("return",null);case 10:case"end":return n.stop()}}),n)})))).data;return v?(0,r.jsxs)(o.Z,{style:{paddingTop:"30px"},direction:"column",children:[(0,r.jsx)(o.Z,{item:!0,children:(0,r.jsx)(l.LazyLoadImage,{src:t(664391)("./".concat(v.icon,".png")),width:"80",effect:"opacity"})}),(0,r.jsx)(o.Z,{item:!0,children:(0,r.jsx)(s.Z,{children:v.name})}),w&&(0,r.jsx)(p.Z,{data:w,columns:h}),(0,r.jsx)(o.Z,{item:!0})]}):(0,r.jsx)("div",{})}return(0,r.jsx)("div",{})}},16363:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[lang]/user",function(){return t(720191)}])}},function(n){n.O(0,[774,272,431,433,108,185,786,796,767,941,977,525],(function(){return e=16363,n(n.s=e);var e}));var e=n.O();_N_E=e}]);