(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[490],{692137:function(e,n,t){"use strict";function r(e,n,t,r,a,o,i){try{var c=e[o](i),s=c.value}catch(l){return void t(l)}c.done?n(s):Promise.resolve(s).then(r,a)}function a(e){return function(){var n=this,t=arguments;return new Promise((function(a,o){var i=e.apply(n,t);function c(e){r(i,a,o,c,s,"next",e)}function s(e){r(i,a,o,c,s,"throw",e)}c(void 0)}))}}t.d(n,{Z:function(){return a}})},885515:function(e,n,t){"use strict";var r=t(785893),a=t(896156),o=t(781253),i=t(811163),c=t(390044);function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.keyField,t=e.data,a=e.paginationDefaultPage,s=e.expandableRowExpanded,u=(0,o.Z)(e,["keyField","data","paginationDefaultPage","expandableRowExpanded"]),d=(0,i.useRouter)(),f=d.query,p=d.push,g=d.route,x=function(e){for(var n=f,t=0,r=Object.keys(e);t<r.length;t++){var a=r[t];e[a]?n[a]=e[a]:delete n[a]}p("".concat(g,"?").concat(Object.keys(n).map((function(e){return"".concat(e,"=").concat(n[e])})).join("&")),null,{shallow:!0})},h=t.map((function(e,n){return l(l({},e),{},{_id:n})}));n&&t.findIndex((function(e){return e[n]===f[n]}));return(0,r.jsx)(c.ZP,l({pagination:!0,expandableRowExpanded:s||function(e){return"string"===typeof f.row&&e._id===parseInt(f.row)},paginationDefaultPage:a||("string"===typeof f.page?parseInt(f.page):1),onRowExpandToggled:function(e,n){x({row:e?n._id:null})},keyField:n,dense:!1,expandOnRowClicked:!0,customStyles:{header:{style:{backgroundColor:"transparent"}},table:{style:{backgroundColor:"transparent"}},cells:{style:{backgroundColor:"transparent"}},tableWrapper:{style:{backgroundColor:"transparent"}},rows:{style:{backgroundColor:"transparent"},highlightOnHoverStyle:{backgroundColor:"#ffffff85"},stripedStyle:{backgroundColor:"#fafafa5c"}},contextMenu:{style:{backgroundColor:"transparent"},activeStyle:{backgroundColor:"#ffffff85"}},subHeader:{style:{backgroundColor:"transparent"}},pagination:{style:{backgroundColor:"transparent"}},head:{style:{backgroundColor:"transparent"}},headRow:{style:{backgroundColor:"transparent"}},expanderButton:{style:{backgroundColor:"transparent"}},expanderRow:{style:{backgroundColor:"#ffffff85"}},noData:{style:{backgroundColor:"#ffffff85"}},headCells:{style:{backgroundColor:"transparent"}},progress:{style:{backgroundColor:"transparent"}}},onSort:function(e,n){x({sort:"".concat(e.name,":").concat(n)})},striped:!0,onChangePage:function(e,n){x({page:e})},onChangeRowsPerPage:function(e,n){x({page:n,rowsPerPage:e})},paginationRowsPerPageOptions:[20],paginationPerPage:20,data:h},u))}},720191:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSG:function(){return y}});var r=t(785893),a=t(887757),o=t.n(a),i=t(692137),c=t(541749),s=t(522318),l=t(672679),u=t(388767),d=t(649525),f=t(729168),p=t(885515),g=t(126464),x=t(967964),h=[{name:"Arena Info",minWidth:"300",center:!0,cell:function(e){var n=e.arena;return console.log(n),(0,r.jsxs)(c.Z,{container:!0,direction:"column",justify:"center",alignContent:"center",alignItems:"center",children:[(0,r.jsx)(c.Z,{item:!0,children:(0,r.jsx)(l.LazyLoadImage,{src:t(705977)("./".concat(n.boss_shape,".png"))})}),(0,r.jsx)(c.Z,{item:!0,children:(0,r.jsx)(d.Z,{label:!1,weakness:[n.attr1,n.attr2]})})]})},grow:0},{name:"Ranking History",grow:3,center:!0,cell:function(e){return(0,r.jsx)(p.Z,{title:"Top 1000 Ranking",data:e.formations,defaultSortAsc:!0,defaultSortField:"id",pagination:!1,subHeader:!1,noHeader:!0,columns:[{selector:"rank",name:"Rank",maxWidth:"100px",minWidth:"60px",center:!0,sortable:!0},{name:"Score",selector:"score",width:"130px",hide:"md"},{name:"date",selector:"createdAt",width:"100px",center:!0},{name:"Formation",center:!0,width:"400px",cell:function(e){var n;return e?(0,r.jsx)(c.Z,{container:!0,direction:"row",wrap:"nowrap",children:null===(n=e.party)||void 0===n?void 0:n.map((function(e){return(0,r.jsx)(c.Z,{container:!0,direction:"column",item:!0,children:e.main>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z,{item:!0,style:{position:"relative"},children:(0,r.jsx)(f.Z,{member_id:e.main,width:"80",lv:e.main_lv,ex:1===e.main_ex_flg})}),(0,r.jsxs)(c.Z,{container:!0,direction:"column",children:[(0,r.jsxs)(c.Z,{container:!0,direction:"row",children:[(0,r.jsx)(c.Z,{item:!0,children:0!==e.sub1&&(0,r.jsx)("div",{children:(0,r.jsx)(l.LazyLoadImage,{src:t(82779)("./".concat(e.sub1,".png")),width:"40",effect:"opacity"})})}),(0,r.jsx)(c.Z,{item:!0,children:0!==e.sub2&&(0,r.jsx)(l.LazyLoadImage,{src:t(82779)("./".concat(e.sub2,".png")),width:"40",effect:"opacity"})})]}),(0,r.jsxs)(c.Z,{container:!0,direction:"row",children:[(0,r.jsx)(c.Z,{item:!0,children:0!==e.weapon&&(0,r.jsx)(l.LazyLoadImage,{src:t(381903)("./".concat(e.weapon.toString().slice(0,-1),".png")),width:"40",effect:"opacity"})}),(0,r.jsx)(c.Z,{item:!0,children:0!==e.acc&&(0,r.jsx)(l.LazyLoadImage,{src:t(429513)("./".concat(e.acc.toString().slice(0,-1),".png")),width:"40",effect:"opacity"})})]}),(0,r.jsx)(c.Z,{container:!0,direction:"row",justify:"center",children:(0,r.jsx)(c.Z,{item:!0,style:{position:"relative",height:"40px"},children:0!==e.specialskill&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.LazyLoadImage,{src:t(767207)("./".concat(e.specialskill.toString().slice(0,-1)+"1",".png")),height:"40",style:{position:"relative",left:"20px",zIndex:0},effect:"opacity"}),(0,r.jsx)(l.LazyLoadImage,{src:t(245112)("./".concat("1"===e.specialskill.toString().slice(-1)?"icon_skill_01":"icon_skill_02",".png")),height:"40",style:{position:"relative",zIndex:1,left:"-20px"},effect:"opacity"})]})})})]})]})},e.form_no)}))}):(0,r.jsx)("div",{})}}]})}}],y=!0;n.default=function(e){var n=e.lang,a=e.arenas;if("jp"===n){var d=(0,g.Z)().query.id,f=x.W.useContainer(),y=f.mongodb,m=f.isAuthenticated,b=(0,u.useQuery)([d,m],(0,i.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d||!m){e.next=5;break}return e.next=3,y.db("konofan").collection("user").findOne({_id:d});case 3:return n=e.sent,e.abrupt("return",n);case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})))).data,j=(0,u.useQuery)([!!b,m],(0,i.Z)(o().mark((function e(){var n,t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b||!m){e.next=9;break}return n=Object.values(b.ranking).flat(),e.next=4,y.db("konofan").collection("unique").find({_id:{$in:n}});case 4:return t=e.sent,console.log(t),r=[],Object.keys(b.ranking).forEach((function(e){var n=b.ranking[e];r.push({arena_id:e,arena:a.find((function(n){return n.id===e})),formations:n.map((function(e){return t.find((function(n){return n._id.toHexString()===e.toHexString()}))}))})})),e.abrupt("return",r);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})))).data;return b?(0,r.jsxs)(c.Z,{style:{paddingTop:"30px"},direction:"column",children:[(0,r.jsx)(c.Z,{item:!0,children:(0,r.jsx)(l.LazyLoadImage,{src:t(664391)("./".concat(b.icon,".png")),width:"80",effect:"opacity"})}),(0,r.jsx)(c.Z,{item:!0,children:(0,r.jsx)(s.Z,{children:b.name})}),j&&(0,r.jsx)(p.Z,{data:j,columns:h}),(0,r.jsx)(c.Z,{item:!0})]}):(0,r.jsx)("div",{})}return(0,r.jsx)("div",{})}},16363:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[lang]/user",function(){return t(720191)}])}},function(e){e.O(0,[774,272,431,433,108,786,185,726,767,886,977,525],(function(){return n=16363,e(e.s=n);var n}));var n=e.O();_N_E=n}]);