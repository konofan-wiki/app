(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[742],{624260:function(e,n,t){"use strict";var r=t(896156),i=t(887757),o=t.n(i),a=t(692137),c=t(409669),u=t.n(c),s=t(388767),d=t(659042),f=t(126464);function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){e.lang;var n=d.W.useContainer(),t=(n.mongodb,n.isAuthenticated),r=(0,f.Z)().query,i=r.arena_id,c=r.arena_date,p=(0,s.useQuery)([i,c,t],(0,a.Z)(o().mark((function e(){var n,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().get("https://test-vercel-thainq3127.vercel.app/api/arena/".concat(i,"/").concat(c));case 2:if(n=e.sent,!(t=n.data)){e.next=8;break}return e.abrupt("return",t.data);case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}}),e)})))),h=p.data;p.isLoading;return{ranking_data:h?h.map((function(e){var n=e.party.map((function(n){return["main","sub1","sub2"].forEach((function(t){if(n[t]>0){var r=e.member.find((function(e){return e.member_id===n[t]}));n["".concat(t,"_lv")]=r.lv,n["".concat(t,"_ex_flg")]=r.ex_flg}})),n})),t=l(l({},e),{},{party:n});return delete t.member,t})):[]}}},18295:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSG:function(){return L},default:function(){return E}});var r=t(785893),i=t(387329),o=t(896156),a=t(698477),c=t(524509),u=t(74250),s=t(882096),d=t(667294),f=t(926802),p=t(781253),l=t(294184),h=t.n(l),g=t(815088),O=t(883877);function b(e){var n=e.top,t=e.left,i=e.className,o=e.data,c=e.size,u=e.nodeId,s=e.nodeAlign,d=e.nodeWidth,f=e.nodePadding,l=(e.nodePaddingRatio,e.extent),b=e.iterations,y=e.circularLinkGap,v=e.children,j=e.nodeComponent,m=(void 0===j&&O.Z,(0,p.Z)(e,["top","left","className","data","size","nodeId","nodeAlign","nodeWidth","nodePadding","nodePaddingRatio","extent","iterations","circularLinkGap","children","nodeComponent"]),(0,g.Z)());c&&m.size(c),u&&m.nodeId(u),s&&m.nodeAlign(s),d&&m.nodeWidth(d),f&&m.nodePadding(f),l&&m.extent(l),b&&m.iterations(b),y&&m.circularLinkGap(y);var x=m(o);if(v)return(0,r.jsx)(a.Z,{top:n,left:t,className:h()("vx-sankey",i),children:v({data:x})})}var y=t(496486);function v(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function j(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?v(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var m=function(e,n){var t=[];return e.forEach((function(e,r){var i=n[r],o=t.findIndex((function(n){return n.source===e&&n.target===i}));-1===o?t.push({source:e,target:i,value:1}):t[o]=j(j({},t[o]),{},{value:t[o].value+1})})),t},x=t(624260),k=t(291483);function P(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function w(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?P(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var _=new(t.n(k)()),Z=((0,u.ZP)(s.ZP),(0,c.h5h)().source((function(e){return[e.source.x1,e.y0]})).target((function(e){return[e.target.x0,e.y1]}))),L=!0,E=function(){var e=(0,d.useState)({highlightLinkIndexes:[]}),n=e[0],o=e[1],c=(0,x.Z)({lang:"jp"}).ranking_data,u=function(e){var n={nodes:[],links:[]};return(0,y.range)(4).forEach((function(t){var r,o,a=m(e.map((function(e){return e[t]})),e.map((function(e){return e[t+1]})));0===t&&(o=n.nodes).push.apply(o,(0,i.Z)(a.map((function(e){return{id:e.source,group:t}})))),(r=n.nodes).push.apply(r,(0,i.Z)(a.map((function(e){return{id:e.target,group:t+1}})))),a.forEach((function(e){var r=n.nodes.findIndex((function(n){return n.id===e.source&&n.group===t})),i=n.nodes.findIndex((function(n){return n.id===e.target&&n.group===t+1}));n.links.push({source:r,target:i,value:e.value})}))})),n}(c.map((function(e){return e.party.map((function(e){return e.main.toString()}))})));return u=w(w({},u),{},{nodes:u.nodes.map((function(e){return{name:e.id,group:e.group}}))}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.LR,{}),c.length>0&&(0,r.jsx)("svg",{width:1200,height:1080,children:(0,r.jsx)(b,{top:0,left:0,data:u,size:[1200,1080],nodeWidth:15,nodePadding:.01,nodeAlign:function(e){return e.group},extent:[[0,0],[1120,1074]],children:function(e){var c=e.data;return(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(a.Z,{children:c.links.map((function(e,t){return(0,r.jsx)("path",{d:Z(e),stroke:n.highlightLinkIndexes.includes(t)?"red":"black",strokeWidth:Math.max(1,e.width),opacity:n.highlightLinkIndexes.includes(t)?.5:.15,fill:"none",onMouseOver:function(e){o({highlightLinkIndexes:[t]})},onMouseOut:function(e){o({highlightLinkIndexes:[]})}},"link-".concat(t))}))}),c.nodes.map((function(e,c){return(0,r.jsxs)(a.Z,{top:e.y0,left:e.x0,children:[(0,r.jsx)("rect",{id:"rect-".concat(c),width:e.x1-e.x0,height:e.y1-e.y0,fill:_.hex(e.name),opacity:1,strokeWidth:0,onMouseOver:function(n){o({highlightLinkIndexes:[].concat((0,i.Z)(e.sourceLinks.map((function(e){return e.index}))),(0,i.Z)(e.targetLinks.map((function(e){return e.index}))))})},onMouseOut:function(e){o({highlightLinkIndexes:[]})}}),(e.y1-e.y0>80||[].concat((0,i.Z)(e.sourceLinks),(0,i.Z)(e.targetLinks)).filter((function(e){return n.highlightLinkIndexes.includes(e.index)})).length>0)&&"0"!==e.name&&(0,r.jsx)("image",{href:t(664391)("./".concat(e.name,".png")),width:80,height:80,y:(e.y1-e.y0)/2-40,x:15})]},"node-".concat(c))}))]})}})})]})}},155655:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[lang]/parrallel-set",function(){return t(18295)}])}},function(e){e.O(0,[662,969,269,202,509,512,391,675,802,774,888,179],(function(){return n=155655,e(e.s=n);var n}));var n=e.O();_N_E=n}]);